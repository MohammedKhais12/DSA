class Solution {
public:
    ListNode* deleteDuplicates(ListNode* head) {

        if(head==NULL || head->next==NULL){
            return head;
        }

        ListNode* dummy = new ListNode(0);
        ListNode* newHead = dummy;
        ListNode* newTemp = newHead;
        ListNode* temp = head;
        ListNode* prev = head->next;

        while(temp!=NULL){
            if(prev != NULL && temp->val == prev->val){
                while(prev != NULL && prev->val==temp->val){
                    prev = prev->next;
                }
                temp = prev;
                if(prev != NULL) prev = prev->next;
            }
            else{
                ListNode* node = new ListNode(temp->val);
                newTemp->next = node;
                newTemp = newTemp->next;

                temp = temp->next;
                if(prev != NULL) prev = prev->next;
            }
        }

        return newHead->next;
    }
};
